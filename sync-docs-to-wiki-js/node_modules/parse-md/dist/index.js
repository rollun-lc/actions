import { load } from 'js-yaml';
const findMetaIndices = (mem, item, i) => {
    if (/^---/.test(item)) {
        mem.push(i);
    }
    return mem;
};
const emptyObject = {};
const parseMeta = ({ lines, metaIndices }) => {
    if (metaIndices.length > 0) {
        const metadata = lines.slice(metaIndices[0] + 1, metaIndices[1]);
        return load(metadata.join('\n'));
    }
    return emptyObject;
};
const parseContent = ({ lines, metaIndices }) => {
    if (metaIndices.length > 0) {
        lines = lines.slice(metaIndices[1] + 1, lines.length);
    }
    return lines.join('\n');
};
const parseMD = contents => {
    const lines = contents.split('\n');
    const metaIndices = lines.reduce(findMetaIndices, []);
    const metadata = parseMeta({ lines, metaIndices });
    const content = parseContent({ lines, metaIndices });
    return { metadata, content };
};
export default parseMD;
